<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/user/edit_class.css"/>
  <body class="bg-light">
    <div class="container">
      <div class="card mt-5 mx-auto" style="max-width: 800px;">
        <div class="card-body">
          <h1 class="text-center mb-4">Chỉnh sửa thông tin lớp học</h1>

          <% if (message) { %>
            <div class="alert alert-danger"><%= message %></div>
          <% } %>
          
          <form id="classForm" action="/user/classes" method="POST" class="needs-validation" novalidate>
            <input type="hidden" name="classId" value="<%= classInfo.id %>" />

            <div class="mb-3">
              <label for="parent_name" class="form-label">Tên phụ huynh</label>
              <input type="text" class="form-control <%= locals.errors && errors.parent_name ? 'is-invalid' : '' %>" id="parent_name" name="parent_name" value="<%= classInfo.parent_name %>" required>
              <div class="invalid-feedback">Vui lòng nhập tên phụ huynh</div>
            </div>

            <div class="mb-3">
              <label for="phone" class="form-label">Số điện thoại</label>
              <input type="tel" class="form-control <%= locals.errors && errors.phone ? 'is-invalid' : '' %>" id="phone" name="phone" value="<%= classInfo.phone %>" required>
              <div class="invalid-feedback">Vui lòng nhập số điện thoại hợp lệ</div>
            </div>

            <div class="mb-3">
              <label for="district" class="form-label">Quận/Huyện</label>
              <input type="text" class="form-control <%= locals.errors && errors.district ? 'is-invalid' : '' %>" id="district" name="district" value="<%= classInfo.district %>" required>
              <div class="invalid-feedback">Vui lòng nhập quận/huyện</div>
            </div>

            <div class="mb-3">
              <label for="province" class="form-label">Tỉnh/Thành phố</label>
              <input type="text" class="form-control <%= locals.errors && errors.province ? 'is-invalid' : '' %>" id="province" name="province" value="<%= classInfo.province %>" required>
              <div class="invalid-feedback">Vui lòng nhập tỉnh/thành phố</div>
            </div>

            <div class="mb-3">
              <label for="subject_id" class="form-label">Môn học</label>
              <select class="form-select <%= locals.errors && errors.subject_id ? 'is-invalid' : '' %>" id="subject_id" name="subject_id" required>
                <option value="">Chọn môn học</option>
                <% subjects.forEach(function(subject) { %>
                  <option value="<%= subject.id %>" <%= (classInfo.subject_id == subject.id) ? 'selected' : '' %>><%= subject.name %></option>
                <% }); %>
              </select>
              <div class="invalid-feedback">Vui lòng chọn môn học</div>
            </div>

            <div class="mb-3">
              <label for="grade_id" class="form-label">Khối lớp</label>
              <select class="form-select <%= locals.errors && errors.grade_id ? 'is-invalid' : '' %>" id="grade_id" name="grade_id" required>
                <option value="">Chọn khối lớp</option>
                <% grades.forEach(function(grade) { %>
                  <option value="<%= grade.id %>" <%= (classInfo.grade_id == grade.id) ? 'selected' : '' %>><%= grade.name %></option>
                <% }); %>
              </select>
              <div class="invalid-feedback">Vui lòng chọn khối lớp</div>
            </div>

            <div class="mb-3">
              <label for="specific_address" class="form-label">Địa chỉ cụ thể</label>
              <input type="text" class="form-control <%= locals.errors && errors.specific_address ? 'is-invalid' : '' %>" id="specific_address" name="specific_address" value="<%= classInfo.specific_address %>" required>
              <div class="invalid-feedback">Vui lòng nhập địa chỉ cụ thể</div>
            </div>

            <div class="mb-3">
              <label for="tutor_gender" class="form-label">Giới tính gia sư</label>
              <select class="form-select <%= locals.errors && errors.tutor_gender ? 'is-invalid' : '' %>" id="tutor_gender" name="tutor_gender" required>
                <option value="any" <%= classInfo.tutor_gender === 'any' ? 'selected' : '' %>>Không yêu cầu</option>
                <option value="male" <%= classInfo.tutor_gender === 'male' ? 'selected' : '' %>>Nam</option>
                <option value="female" <%= classInfo.tutor_gender === 'female' ? 'selected' : '' %>>Nữ</option>
              </select>
              <div class="invalid-feedback">Vui lòng chọn giới tính gia sư</div>
            </div>

            <div class="mb-3">
              <label for="sessions_per_week" class="form-label">Số buổi/tuần</label>
              <input type="number" class="form-control <%= locals.errors && errors.sessions_per_week ? 'is-invalid' : '' %>" id="sessions_per_week" name="sessions_per_week" value="<%= classInfo.sessions_per_week %>" required min="1">
              <div class="invalid-feedback">Vui lòng nhập số buổi học mỗi tuần (tối thiểu 1)</div>
            </div>

            <div class="mb-3">
              <label for="fee_per_session" class="form-label">Học phí/buổi (VNĐ)</label>
              <input type="number" class="form-control <%= locals.errors && errors.fee_per_session ? 'is-invalid' : '' %>" id="fee_per_session" name="fee_per_session" value="<%= classInfo.fee_per_session %>" required min="0">
              <div class="invalid-feedback">Vui lòng nhập học phí mỗi buổi học</div>
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Mô tả</label>
              <textarea class="form-control <%= locals.errors && errors.description ? 'is-invalid' : '' %>" id="description" name="description" rows="3" required><%= classInfo.description %></textarea>
              <div class="invalid-feedback">Vui lòng nhập mô tả</div>
            </div>

            <div class="mb-3">
              <label for="learning_mode" class="form-label">Hình thức học</label>
              <select class="form-select <%= locals.errors && errors.learning_mode ? 'is-invalid' : '' %>" id="learning_mode" name="learning_mode" required>
                <option value="offline" <%= classInfo.learning_mode === 'offline' ? 'selected' : '' %>>Offline</option>
                <option value="online" <%= classInfo.learning_mode === 'online' ? 'selected' : '' %>>Online</option>
                <option value="all" <%= classInfo.learning_mode === 'all' ? 'selected' : '' %>>Linh hoạt</option>
              </select>
              <div class="invalid-feedback">Vui lòng chọn hình thức học</div>
            </div>

            <div class="d-flex justify-content-between">
              <a href="/user" class="btn btn-secondary">Hủy</a>
              <button type="submit" class="btn btn-primary">Cập nhật</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/user/edit_class.js"></script>
  </body>

