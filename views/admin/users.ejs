<h1>Quản lý người dùng</h1>
<a href="/admin" class="btn btn-secondary mb-3">Quay lại</a>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Tên đăng nhập</th>
      <th>Vai trò</th>
      <th>Trạng thái</th>
      <th>Hành động</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
    <tr>
      <td><%= user.id %></td>
      <td><%= user.username %></td>
      <td><%= user.role %></td>
      <td><%= user.is_active ? 'Hoạt động' : 'Vô hiệu hóa' %></td>
      <td>
        <a
          href="/admin/users/edit/<%= user.id %>"
          class="btn btn-warning btn-sm"
          >Sửa</a
        >
        <form
          action="/admin/users/delete/<%= user.id %>"
          method="POST"
          style="display: inline"
        >
          <button
            type="submit"
            class="btn btn-danger btn-sm"
            onclick="return confirm('Bạn chắc chắn muốn xóa?')"
          >
            Xóa
          </button>
        </form>
        <% if (user.is_active) { %>
        <form
          action="/admin/users/disable/<%= user.id %>"
          method="POST"
          style="display: inline"
        >
          <button
            type="submit"
            class="btn btn-secondary btn-sm"
            onclick="return confirm('Bạn chắc chắn muốn vô hiệu hóa?')"
          >
            Vô hiệu hóa
          </button>
        </form>
        <% } else { %>
        <form
          action="/admin/users/enable/<%= user.id %>"
          method="POST"
          style="display: inline"
        >
          <button
            type="submit"
            class="btn btn-success btn-sm"
            onclick="return confirm('Bạn chắc chắn muốn kích hoạt lại?')"
          >
            Kích hoạt lại
          </button>
        </form>
        <% } %>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <% if (currentPage > 1) { %>
    <li class="page-item">
      <a class="page-link" href="/admin/users?page=<%= currentPage - 1 %>"
        >Trang trước</a
      >
    </li>
    <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
    <li class="page-item <%= i === currentPage ? 'active' : '' %>">
      <a class="page-link" href="/admin/users?page=<%= i %>"><%= i %></a>
    </li>
    <% } %> <% if (currentPage < totalPages) { %>
    <li class="page-item">
      <a class="page-link" href="/admin/users?page=<%= currentPage + 1 %>"
        >Trang sau</a
      >
    </li>
    <% } %>
  </ul>
</nav>
